<!DOCTYPE html>
<html lang="ja"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>org-mode で簡易ブログ生成 - toybeam</title><meta name="description" content="devlog of toyboot4e"/><link rel="stylesheet" href="style/simple.min.css"/><link rel="stylesheet" href="style/style.css"/><link rel="stylesheet" href="style/prism.css"/><script type="text/javascript" async="" src="/style/prism.js"></script><!-- MathJax --><script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-MML-AM_CHTML"></script></head><body><header role="banner"><h1><code>org-mode</code> で簡易ブログ生成</h1><p>Oct  9, 2022</p><nav role="navigation"><a href="/">Home</a><a href="https://github.com/toyboot4e">GitHub</a></nav></header><main role="main"><p>
<code>org-mode</code> で本ブログを生成しました (<a href="https://github.com/toyboot4e/toyboot4e.github.io">リポジトリ</a>) 。簡単に紹介します。<br>
</p>

<blockquote>
<p>
本当はミラーボールを回したかったですが、力不足だったようです。<br>
</p>
</blockquote>

<div id="outline-container-org3c76f26" class="outline-2">
<h2 id="org3c76f26"><a href="#org3c76f26"><code>org-publish</code> ベースの SSG</a></h2>
<div class="outline-text-2" id="text-org3c76f26">
</div>
<div id="outline-container-org06f2729" class="outline-3">
<h3 id="org06f2729"><a href="#org06f2729">背景</a></h3>
<div class="outline-text-3" id="text-org06f2729">
<p>
Org はマークアップ言語です。主に Emacs ユーザに利用されています。<br>
</p>

<p>
Emacs のエディタ拡張 <code>org-mode</code> には、 <code>.org</code> ファイルを任意のフォーマットに変換するコマンド (<code>org-publish</code>) が付属します。これを SSG として利用すると、フラットなサイトを簡単に生成できます。<br>
</p>
</div>
</div>

<div id="outline-container-org3067638" class="outline-3">
<h3 id="org3067638"><a href="#org3067638">ファイル構成</a></h3>
<div class="outline-text-3" id="text-org3067638">
<p>
本ブログのファイル構成は以下です:<br>
</p>

<div class="org-src-container">
<pre><code class="src language-sh">.
├── build.el   # ビルドスクリプト + ビルド設定 (ELisp)
├── out        # サイト
├── src        # サイトの全ソースファイル
└── x          # ビルドスクリプトを起動するシェルスクリプト
</code></pre>
</div>

<p>
<code>src/</code> ディレクトリの内容は以下になります。下書きファイルを <code>*.draft.org</code> とし、 release ビルド時は無視します:<br>
</p>

<div class="org-src-container">
<pre><code class="src language-sh">src/
├── img           # 画像ファイル
├── index.org     # 索引 ("sitemap". `org-publish` が自動生成する)
├── *.org         # 投稿記事
├── *.draft.org   # 下書き (`--release` ビルドの際は無視される)
└── style         # CSS, JS
</code></pre>
</div>
</div>
</div>

<div id="outline-container-orga98d0b5" class="outline-3">
<h3 id="orga98d0b5"><a href="#orga98d0b5">CLI</a></h3>
<div class="outline-text-3" id="text-orga98d0b5">
<p>
<code>x</code> のサブコマンドを紹介します:<br>
</p>

<ul class="org-ul">
<li><code>./x build</code>: <code>src</code> ディレクトリをビルドします。<br></li>
<li><code>./x serve</code>: ローカルサーバを立ち上げます。<br></li>
<li><code>./x watch</code>: ソースファイルの変更時に自動的にリビルドします。<br></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgd6dd532" class="outline-2">
<h2 id="orgd6dd532"><a href="#orgd6dd532">主なリソース</a></h2>
<div class="outline-text-2" id="text-orgd6dd532">
<p>
<code>org-mode</code> でブログ生成したいという人がいたら、以下のリンクが役に立つかもしれません。<br>
</p>
</div>

<div id="outline-container-orge8f1a99" class="outline-3">
<h3 id="orge8f1a99"><a href="#orge8f1a99">参考記事</a></h3>
<div class="outline-text-3" id="text-orge8f1a99">
<p>
<code>org-publish</code> の公式マニュアルが説明不足なので、チュートリアルが重宝します:<br>
</p>

<ul class="org-ul">
<li><a href="https://systemcrafters.net/publishing-websites-with-org-mode/building-the-site/">Build Your Website with Org Mode - System Crafters</a><br>
<code>org-publish</code> と <a href="https://simplecss.org">Simple.css</a> で綺麗なブログを作ります。<br></li>

<li><a href="https://taingram.org/blog/org-mode-blog.html">Building a Emacs Org - Mode Blog</a><br>
似た内容ですが ELisp の書き方が参考になります。<br></li>
</ul>
</div>
</div>

<div id="outline-container-org437ebf2" class="outline-3">
<h3 id="org437ebf2"><a href="#org437ebf2">The Org Manual</a></h3>
<div class="outline-text-3" id="text-org437ebf2">
<p>
<a href="https://orgmode.org/org.html">公式マニュアル</a> です。意外に短くて説明不足の感はあります:<br>
</p>

<ul class="org-ul">
<li><a href="https://orgmode.org/manual/Exporting.html">13. Exporting</a><br>

<ul class="org-ul">
<li><a href="https://orgmode.org/manual/Exporting.html">13.9 HTML Export</a><br>
ヘッダ生成などのオプションを設定できます。ただし自由度が低いので、自分で HTML テンプレートを書くのが良いと思います。<br></li>

<li><a href="https://orgmode.org/manual/Advanced-Export-Configuration.html">13.17 Advanced Export Configuration</a><br>
<code>ox-html</code> の HTML テンプレートを差し替えることができます。またフィルタを使ってコードブロックの HTML 変換などをオーバーライドできることがわかります。<br></li>
</ul></li>

<li><a href="https://orgmode.org/manual/Publishing.html">14. Publishing</a><br>
<code>org-publish</code> のオプションを把握することができます。<br></li>
</ul>
</div>
</div>

<div id="outline-container-orgcafd34c" class="outline-3">
<h3 id="orgcafd34c"><a href="#orgcafd34c">HTML 生成の改良</a></h3>
<div class="outline-text-3" id="text-orgcafd34c">
<p>
HTML 生成をハイジャックして完成です:<br>
</p>

<ul class="org-ul">
<li><a href="https://github.com/SystemCrafters/systemcrafters.github.io/blob/master/publish.el">publish.el (System Crafters website)</a><br>
<a href="https://github.com/tali713/esxml">esxml</a> を使ってテンプレート HTML を作成します。<br></li>

<li><a href="https://www.roygbyte.com/add_syntax_highlighting_to_an_org_publish_project.html">Add syntax highlighting to an org-publish-project</a><br>
コードブロックを <a href="https://prismjs.com">Prism.js</a> 対応の HTML に変換するフィルタが載っています。<br></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orga0e415f" class="outline-2">
<h2 id="orga0e415f"><a href="#orga0e415f">その他</a></h2>
<div class="outline-text-2" id="text-orga0e415f">
</div>
<div id="outline-container-org75979fd" class="outline-3">
<h3 id="org75979fd"><a href="#org75979fd">Org 製のブログ</a></h3>
<div class="outline-text-3" id="text-org75979fd">
<p>
見かけるたびに追記します。<br>
</p>

<ul class="org-ul">
<li><a href="https://m13o.net/">m13o.net</a>: <code>org-publish</code> 製<br></li>
<li><a href="https://taingram.org/blog/">Thomas Ingram</a>: <code>org-publish</code> 製<br></li>
<li><a href="https://systemcrafters.cc/">System Crafters</a>: <code>org-publish</code> 製？<br></li>
<li><a href="https://distro.tube/">Distro Tube</a>: <code>org-export</code> 製<br></li>
<li><a href="https://conao3.com/blog/">Conao3 Note</a>: Hugo 製<br></li>
</ul>
</div>
</div>
</div>
</main><footer role="contentinfo"><p>Styled with <a href="https://simplecss.org/">Simple.css</a></p><div><a href="/">Home</a><a href="https://github.com/toyboot4e">GitHub</a></div></footer></body></html>
